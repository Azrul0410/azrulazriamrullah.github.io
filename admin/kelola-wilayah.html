<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kelola Wilayah - Super Admin FisioKita</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>body { font-family: 'Inter', sans-serif; }</style>
</head>
<body class="bg-[#f1f5f9] min-h-screen p-4">
  <h1 class="text-xl font-semibold mb-4">📍 Kelola Wilayah Indonesia</h1>

  <div class="bg-white p-4 rounded shadow max-w-md mx-auto space-y-4">
    <div>
      <label class="block font-medium mb-1">Provinsi Baru</label>
      <input id="provInput" type="text" class="w-full border p-2 rounded" />
    </div>
    <div>
      <label class="block font-medium mb-1">Kabupaten Baru (opsional)</label>
      <input id="kabInput" type="text" class="w-full border p-2 rounded" />
    </div>
    <button onclick="tambahWilayah()" class="bg-[#2563EB] text-white px-4 py-2 rounded hover:bg-[#1e4bb8]">
      Simpan Wilayah
    </button>

    <hr class="my-4" />

    <h2 class="font-semibold mb-2">📄 Data Wilayah Saat Ini</h2>
    <pre id="wilayahTampil" class="bg-gray-100 p-2 text-sm overflow-x-auto rounded h-64"></pre>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDng3ugBylPgzuxZA1YRPavo5br5jjlodo",
      authDomain: "fisiosehat-af9f1.firebaseapp.com",
      projectId: "fisiosehat-af9f1"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let wilayahData = {};

    const tampil = document.getElementById("wilayahTampil");

    function loadWilayah() {
      db.collection("super").doc("wilayah").get().then(doc => {
        if (doc.exists) {
          wilayahData = doc.data();
          tampil.textContent = JSON.stringify(wilayahData, null, 2);
        } else {
          tampil.textContent = "Belum ada data wilayah.";
        }
      });
    }

    function tambahWilayah() {
      const prov = document.getElementById("provInput").value.trim();
      const kab = document.getElementById("kabInput").value.trim();

      if (!prov) {
        alert("Provinsi wajib diisi.");
        return;
      }

      if (!wilayahData[prov]) wilayahData[prov] = {};

      if (kab) wilayahData[prov][kab] = true;

      db.collection("super").doc("wilayah").set(wilayahData).then(() => {
        alert("Wilayah berhasil disimpan.");
        loadWilayah();
        document.getElementById("provInput").value = "";
        document.getElementById("kabInput").value = "";
      });
    }

    loadWilayah();
  </script>
</body>
</html>
