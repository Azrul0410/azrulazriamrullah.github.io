<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pengaturan Tema - Super Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
    input[type="color"]::-webkit-color-swatch { border: none; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">

  <!-- Header -->
  <header class="bg-blue-800 text-white px-6 py-4 shadow flex justify-between items-center">
    <h1 class="text-lg font-semibold">Pengaturan Tema</h1>
    <a href="super-admin-dashboard.html" class="text-sm underline">🔙 Kembali</a>
  </header>

  <!-- Main -->
  <main class="max-w-2xl mx-auto p-6 space-y-6">

    <!-- Warna Tema -->
    <div class="bg-white p-4 rounded shadow space-y-3">
      <h2 class="text-lg font-semibold mb-2">Warna Tema Utama</h2>
      <div class="flex items-center gap-4">
        <label for="warnaUtama">🎨 Pilih Warna:</label>
        <input type="color" id="warnaUtama" class="w-10 h-10 border rounded" />
      </div>
      <button onclick="simpanWarna()" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">💾 Simpan Warna</button>
    </div>

    <!-- Upload Logo -->
    <div class="bg-white p-4 rounded shadow space-y-3">
      <h2 class="text-lg font-semibold mb-2">Logo Website</h2>
      <input type="file" id="logoInput" accept="image/*" class="text-sm" />
      <div class="mt-2" id="logoPreview"></div>
      <button onclick="uploadLogo()" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">⬆️ Upload Logo</button>
    </div>

    <!-- Font -->
    <div class="bg-white p-4 rounded shadow space-y-3">
      <h2 class="text-lg font-semibold mb-2">Font Utama</h2>
      <select id="fontSelect" class="w-full border px-3 py-2 rounded">
        <option value="Inter">Inter</option>
        <option value="Poppins">Poppins</option>
        <option value="Roboto">Roboto</option>
        <option value="Nunito">Nunito</option>
      </select>
      <button onclick="simpanFont()" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">💾 Simpan Font</button>
    </div>
  </main>

  <!-- Firebase Logic -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDng3ugBylPgzuxZA1YRPavo5br5jjlodo",
      authDomain: "fisiosehat-af9f1.firebaseapp.com",
      projectId: "fisiosehat-af9f1",
      storageBucket: "fisiosehat-af9f1.appspot.com",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();
    const configRef = db.collection("global").doc("konfigurasi");

    // Simpan warna utama
    function simpanWarna() {
      const warna = document.getElementById("warnaUtama").value;
      configRef.set({ warnaUtama: warna }, { merge: true }).then(() => alert("✅ Warna diperbarui!"));
    }

    // Simpan font utama
    function simpanFont() {
      const font = document.getElementById("fontSelect").value;
      configRef.set({ fontUtama: font }, { merge: true }).then(() => alert("✅ Font diperbarui!"));
    }

    // Upload Logo
    function uploadLogo() {
      const file = document.getElementById("logoInput").files[0];
      if (!file) return alert("Pilih file logo terlebih dahulu!");

      const ref = storage.ref().child("branding/logo.png");
      ref.put(file).then(() => {
        alert("✅ Logo berhasil diupload!");
        loadPreview();
      });
    }

    // Preview Logo
    function loadPreview() {
      const preview = document.getElementById("logoPreview");
      const ref = storage.ref("branding/logo.png");
      ref.getDownloadURL().then(url => {
        preview.innerHTML = `<img src="${url}" alt="Logo Preview" class="w-20 h-20 object-contain" />`;
      });
    }

    // Load pengaturan awal
    configRef.get().then(doc => {
      const data = doc.data() || {};
      if (data.warnaUtama) document.getElementById("warnaUtama").value = data.warnaUtama;
      if (data.fontUtama) document.getElementById("fontSelect").value = data.fontUtama;
    });

    loadPreview();
  </script>
</body>
</html>
