<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pengaturan Fitur - Super Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <style>body { font-family: 'Inter', sans-serif; }</style>
</head>
<body class="bg-gray-50 text-black">

  <!-- Header -->
  <header class="bg-blue-800 text-white px-6 py-4 shadow flex justify-between items-center">
    <h1 class="text-lg font-semibold">Pengaturan Fitur Website</h1>
    <a href="super-admin-dashboard.html" class="text-sm underline">ðŸ”™ Kembali</a>
  </header>

  <!-- Main -->
  <main class="max-w-xl mx-auto p-6 space-y-6">

    <form id="fiturForm" class="space-y-4">

      <div class="bg-white p-4 rounded shadow">
        <h2 class="font-semibold mb-4">Fitur Layanan</h2>
        <label class="flex justify-between items-center mb-2">
          Konsultasi Online
          <input type="checkbox" id="konsultasiOnline" />
        </label>
        <label class="flex justify-between items-center mb-2">
          Konsultasi Home Visit
          <input type="checkbox" id="konsultasiOffline" />
        </label>
        <label class="flex justify-between items-center mb-2">
          Edukasi Kesehatan
          <input type="checkbox" id="edukasi" />
        </label>
        <label class="flex justify-between items-center mb-2">
          Tiket Cetak
          <input type="checkbox" id="tiketCetak" />
        </label>
      </div>

      <div class="bg-white p-4 rounded shadow">
        <h2 class="font-semibold mb-4">Fitur Akun</h2>
        <label class="flex justify-between items-center mb-2">
          Login Pasien
          <input type="checkbox" id="loginPasien" />
        </label>
        <label class="flex justify-between items-center mb-2">
          Login Google
          <input type="checkbox" id="googleLogin" />
        </label>
      </div>

      <div class="bg-white p-4 rounded shadow">
        <h2 class="font-semibold mb-4">Fitur Tambahan</h2>
        <label class="flex justify-between items-center mb-2">
          Kirim Keluhan Otomatis ke Chat
          <input type="checkbox" id="autoChatKeluhan" />
        </label>
      </div>

      <div class="text-center">
        <button type="submit"
          class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
          ðŸ’¾ Simpan Perubahan
        </button>
      </div>
    </form>
  </main>

  <!-- Firebase Logic -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDng3ugBylPgzuxZA1YRPavo5br5jjlodo",
      authDomain: "fisiosehat-af9f1.firebaseapp.com",
      projectId: "fisiosehat-af9f1"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const docRef = db.collection("pengaturan").doc("fitur");

    async function muatFitur() {
      const snap = await docRef.get();
      if (!snap.exists) return;
      const data = snap.data();
      for (const key in data) {
        const el = document.getElementById(key);
        if (el) el.checked = !!data[key];
      }
    }

    document.getElementById("fiturForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const fitur = {
        konsultasiOnline: document.getElementById("konsultasiOnline").checked,
        konsultasiOffline: document.getElementById("konsultasiOffline").checked,
        edukasi: document.getElementById("edukasi").checked,
        tiketCetak: document.getElementById("tiketCetak").checked,
        loginPasien: document.getElementById("loginPasien").checked,
        googleLogin: document.getElementById("googleLogin").checked,
        autoChatKeluhan: document.getElementById("autoChatKeluhan").checked
      };
      await docRef.set(fitur, { merge: true });
      alert("Fitur berhasil diperbarui.");
    });

    window.onload = muatFitur;
  </script>
</body>
</html>
